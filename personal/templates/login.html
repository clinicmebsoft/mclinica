{% extends "genericos/layout.html" %}
{% block content %}
{% load static %}

  <!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
  	<section class="content">

        <div class="container h-100">

            <div class="d-flex justify-content-center ">

                <div class="user_card">

                    <div class="d-flex justify-content-center mb-3 mt-3">
                        <div class="brand_logo_container">
                            <img src="{% static  '/img/logos/MEB64.png'%}" class="brand_logo" alt="Logo">
                            <h3>Login</h3>
                        </div>
                    </div>

                    <div class="row mt-2" style="width: 300px;">

                        <form action="" method="post">
                            {% csrf_token %}
                             {% if messages %}
                                {% for mensaje in messages %}
                                    <div class="alert alert-{{ mensaje.tags }}" role="alert">
                                        {{ mensaje}}
                                    </div>
                                {% endfor %}
                            {% endif %}
                            <div class="input-group mb-3">
                                <label for="id_login_usuario" class="input-group-text"><i class="fas fa-user"></i></label>
                                <input type="text" name="id_login_usuario" id="id_login_usuario" class="form-control input_user" value="" placeholder="Usuario">
                            </div>
                            <div class="input-group mb-2">
                                <label for="id_login_contra" class="input-group-text"><i class="fas fa-key"></i></label>
                                <input type="password" name="id_login_contra" id="id_login_contra" class="form-control input_pass" value="" placeholder="Contraseña">

                            </div>
                            <button  class="btn btn-outline-primary" >Entrar</button>
                        </form>
                    </div>


                    <div class="mt-4">
                        <div class="d-flex justify-content-center links">
                            ¿No tienes cuenta? <a href="crear_cuenta" class="btn btn-link ml-2">Crear cuenta</a>
                        </div>
                        <div class="d-flex justify-content-center links">
                            <a href="olvidacontra">¿Olvidaste tu contraseña?</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
<!--
    <script>
        function login(){
            const usuario = document.getElementById('id_login_usuario').value;
            const contra = document.getElementById('id_login_contra').value;
            if (usuario==''){
                toastr.error('Falta usuario...');return;
            } else if (contra==''){
                toastr.error('Falta contraseña');return;
            }else{
                const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;
                fetch('/ax_login',
                    {
                        method: "POST",
                        headers: {
                            'Accept': 'application/json',
                            'X-Requested-With': 'XMLHttpRequest', //Necessary to work with request.is_ajax()
                            'X-CSRFToken': csrftoken,
                        },
                        body: JSON.stringify({'usuario':usuario,'contra':contra})
                    })
                    .then((response) => response.json())
                    .then((response) => {
                        //alert( response.mensaje);
                        if (response.respuesta.mensaje.includes('Error'))
                        {
                            toastr.error(response.respuesta.mensaje);
                        }
                        else {
                            toastr.success(response.respuesta.mensaje);
                        }
                        //mensaje(response.respuesta.mensaje);
                    })
            }
            //alert("login");
        }
    </script>-->
</div>
{% endblock content %}